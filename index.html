<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="index.css">
    <title>Document</title>
      
</head>

<body>
    <div>

        <ul class="tree">

            <li>
                <div class="box">
                    <div class="left">
                        <p>COO</p>
                        <p><span class="ticket">Ticket Count:</span> 0</p>
                    </div>

                    <div id="coo" class="right">
                        <button id="addData" onclick="addGM();">+</button>
                    </div>
                </div>
                <ul id="gm">
                </ul>
            </li>

        </ul>


    </div>
<script data-require="jquery@3.1.1" data-semver="3.1.1" src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script>
       function wcqib_refresh_quantity_increments() {
            jQuery("div.quantity:not(.buttons_added), td.quantity:not(.buttons_added)").each(function (a, b) {
                var c = jQuery(b);
                c.addClass("buttons_added"), c.children().first().before('<input type="button" value="-" class="minus" />'), c.children().last().after('<input type="button" value="+" class="plus" />')
            })
        }
        String.prototype.getDecimals || (String.prototype.getDecimals = function () {
            var a = this,
                b = ("" + a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);
            return b ? Math.max(0, (b[1] ? b[1].length : 0) - (b[2] ? +b[2] : 0)) : 0
        }), jQuery(document).ready(function () {
            wcqib_refresh_quantity_increments()
        }), jQuery(document).on("updated_wc_div", function () {
            wcqib_refresh_quantity_increments()
        }), jQuery(document).on("click", ".plus, .minus", function () {
            var a = jQuery(this).closest(".quantity").find(".qty"),
                b = parseFloat(a.val()),
                c = parseFloat(a.attr("max")),
                d = parseFloat(a.attr("min")),
                e = a.attr("step");
            b && "" !== b && "NaN" !== b || (b = 0), "" !== c && "NaN" !== c || (c = ""), "" !== d && "NaN" !== d || (d = 0), "any" !== e && "" !== e && void 0 !== e && "NaN" !== parseFloat(e) || (e = 1), jQuery(this).is(".plus") ? c && b >= c ? a.val(c) : a.val((b + parseFloat(e)).toFixed(e.getDecimals())) : d && b <= d ? a.val(d) : b > 0 && a.val((b - parseFloat(e)).toFixed(e.getDecimals())), a.trigger("change")
        });
        let gm = [{cooTicket: 0}];
        function addGM() {
            let ul = document.getElementById("gm");
            let children = ul.children.length + 1;
            gm.push({gmID: children , ticketCount: 0, manager:[]})
            console.log(gm)
            let node = document.createElement("li");
            node.innerHTML = `<div class='box'><div class='left'><p>General Manager ${children}</p><p><span class='ticket'>Ticket Count:</span> 0</p> </div><div class='right'><button onclick="addManager(${children});">+</button></div></div><ul id="manager${children}"></ul>`;
            ul.appendChild(node);
            window.scrollBy(0, document.body.scrollHeight);
        }
        function addManager(id) {
            let ul = document.getElementById(`manager${id}`);
            let children = ul.children.length + 1;
            gm.filter(el=> el.gmID === id)[0].manager?.push({ managerID: children, ticketCount: 0, member: [] })
             console.log(gm)
            let node = document.createElement("li");
            node.innerHTML = `<div class='box'><div class='left'><p>Manager ${children}</p><p><span class='ticket'>Ticket Count:</span> 0</p> </div><div class='right'><button onclick="addMember(${id},${children});">+</button></div></div><ul id="GM${id}manager${children}"></ul>`;
            ul.appendChild(node);
            window.scrollBy(0, document.body.scrollHeight);
        }
        function addMember(gmID, managerID) {
            let ul = document.getElementById(`GM${gmID}manager${managerID}`);
            let children = ul.children.length + 1;
            gm.filter(el => el.gmID === gmID)[0].manager.filter(el => el.managerID === managerID)[0].member?.push({ memberID: children, ticketCount: 0 })
               console.log(gm)
            let node = document.createElement("li");
            node.innerHTML = `<div class="box"><div class="left member"><p>Member ${children}</p></div><div class="right"><div class="ticket"><p>Ticket</p> <div class="quantity buttons_added"><input type="button" value="-" class="minus"><input readOnly type="number" step="1" min="0" max="" name="quantity" value="0" title="Qty" class="input-text qty text" size="4" pattern="" inputmode=""><input type="button" value="+" class="plus"></div></div></div></div>`;
            ul.appendChild(node);
            window.scrollBy(0, document.body.scrollHeight);
        }
  
    </script>
</body>

</html>